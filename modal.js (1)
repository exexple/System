// ============================================================
// MODAL SYSTEM MODULE
// ============================================================
// Handles modal dialogs for notifications and confirmations
/**
	Show a modal dialog
	@param {string} message - The message to display
	@param {string} title - The modal title
	@param {string} icon - The icon to display
*/
function showModal(message, title = "Info", icon = "ℹ️") {
let modal = document.getElementById('customModal');
if (!modal) {
const template = document.getElementById('modalTemplate');
if (template) {
const clone = template.content.cloneNode(true);
document.body.appendChild(clone);
modal = document.getElementById('customModal');
} else {
// Fallback if template doesn't exist
modal = createModalElement();
document.body.appendChild(modal);
}
}
// Set content
const iconEl = document.getElementById('modalIcon');
const titleEl = document.getElementById('modalTitle');
const messageEl = document.getElementById('modalMessage');
const closeBtn = document.getElementById('modalCloseBtn');
if (iconEl) iconEl.textContent = icon;
if (titleEl) titleEl.textContent = title;
if (messageEl) messageEl.innerHTML = message;
// Attach close handler
if (closeBtn) {
closeBtn.onclick = closeModal;
}
modal.style.display = 'flex';
}
/**
	Close the modal
*/
function closeModal() {
const modal = document.getElementById('customModal');
if (modal) {
modal.style.display = 'none';
}
}
/**
	Create modal element dynamically (fallback)
*/
function createModalElement() {
const modal = document.createElement('div');
modal.id = 'customModal';
modal.style.cssText = 'position:fixed;left:0;top:0;width:100vw;height:100vh;background:rgba(12,13,24,0.8);z-index:10000;display:flex;align-items:center;justify-content:center;';
modal.innerHTML = <div id="customModalBox" style="background:#222;border:3px solid gold;color:#fff;border-radius:12px;max-width:90vw;width:330px;margin:auto;padding:28px;text-align:center;box-shadow:0 0 30px gold;"> <div style="font-size:32px;margin-bottom:10px;" id="modalIcon"></div> <div style="font-size:19px;font-weight:bold;margin-bottom:10px;color:gold;" id="modalTitle"></div> <div style="margin:15px 0;color:#adf;line-height:1.6;" id="modalMessage"></div> <button id="modalCloseBtn" style="margin-top:12px;padding:10px 48px;background:gold;color:#1a1d25;border:none;border-radius:7px;font-size:16px;font-weight:bold;cursor:pointer;">OK</button> </div>;
return modal;
}
/**
	Show a confirmation dialog
	@param {string} message - The confirmation message
	@returns {Promise<boolean>} - Resolves to true if confirmed
*/
function confirmDelete(message) {
return new Promise(resolve => {
const modalHTML = <div id="deleteModalOverlay" style="position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.7); display:flex; align-items:center; justify-content:center; z-index: 9999;"> <div style="background:#2a2a2a; border:2px solid #FFD700; border-radius:10px; padding:30px; text-align:center; max-width:400px; box-shadow: 0 0 20px rgba(255,215,0,0.5);"> <div style="font-size: 30px; margin-bottom:15px;">⚠️</div> <h2 style="color:#FFD700; margin: 15px 0;">Delete Task?</h2> <p style="color:#ccc; margin:20px 0; font-size:16px;">${message}</p> <div style="margin-top: 25px; display: flex; gap: 15px; justify-content: center;"> <button id="cancelDeleteBtn" style="padding: 12px 40px; font-size:16px; background-color:#999; border:none; border-radius:5px; cursor:pointer; color:white; font-weight:bold;">No</button> <button id="confirmDeleteBtn" style="padding: 12px 40px; font-size:16px; background-color:#FFD700; border:none; border-radius:5px; cursor:pointer; color:black; font-weight:bold;">Yes</button> </div> </div> </div>;
 document.body.insertAdjacentHTML('beforeend', modalHTML);
 
 const overlay = document.getElementById('deleteModalOverlay');
 const confirmBtn = document.getElementById('confirmDeleteBtn');
 const cancelBtn = document.getElementById('cancelDeleteBtn');
 
 function cleanup() {
     if (overlay && overlay.parentNode) {
         overlay.parentNode.removeChild(overlay);
     }
 }
 
 confirmBtn.addEventListener('click', () => {
     cleanup();
     resolve(true);
 });
 
 cancelBtn.addEventListener('click', () => {
     cleanup();
     resolve(false);
 });

});
}